import{d as j,u as z,a as F,r as d,c as S,o as H,b,e,f as x,n as y,g as t,t as a,w as U,h as M,v as L,i as J,j as O,k as f}from"./index-CtrMJp5d.js";const A="/login/assets/es-CRfDT-rm.png",G="/login/assets/en-zPE5JMws.png";function K(h,u,...n){}function Q(h){const u=n=>(l,...c)=>{K(n,`${h} => ${l}`,...c)};return{debug:u("debug"),log:u("log"),info:u("info"),warn:u("warn"),error:u("error")}}const W={class:"login"},X={class:"login-container"},Y={class:"lang-theme-switch text-end mb-2"},Z=["aria-label","aria-pressed","title"],ee=["src"],se=["aria-label","aria-pressed","title"],le=["src"],te=["aria-label","title"],oe={class:"login-header"},ae={class:"brand"},ne={class:"login-content"},re=["placeholder"],ie={key:0,class:"invalid-feedback"},ue=["placeholder"],de={key:1,class:"invalid-feedback"},ce={class:"form-check mb-3"},ve={for:"rememberMe",class:"form-check-label"},ge=["disabled"],me={key:0,class:"spinner-border spinner-border-sm me-2"},pe={class:"d-block mt-2 text-center"},be={key:0,class:"error-message",role:"alert"},fe={key:0,class:"reset-modal"},he={class:"reset-modal-content"},_e={class:"mb-3"},ke=["placeholder"],we={id:"resetHelp",class:"form-text text-muted d-block mb-2 text-center"},xe={class:"d-flex justify-content-between mt-3"},ye=j({__name:"Login",setup(h){const u=Q("@views/Login.vue"),n=z(),{t:l,locale:c}=F(),_=d(""),k=d(""),E=d(!1),m=d(null),p=d(!1),v=d(null),g=d(null),C=d(!1),w=d(""),r=d(""),$=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i,I=S(()=>c.value==="es"),R=S(()=>c.value==="en");function T(i){c.value=i,localStorage.setItem("lang",i)}const V=async()=>{if(m.value=null,v.value=null,g.value=null,p.value=!0,_.value.trim()||(v.value=l("login.userRequired")||"El usuario es obligatorio"),k.value.trim()||(g.value=l("login.passwordRequired")||"La contraseña es obligatoria"),v.value||g.value){p.value=!1;return}u.log("checkForm => datos:",{usuario:_.value,contraseña:k.value,recordar:E.value}),await new Promise(B=>setTimeout(B,1e3));const i={dashboard:"dash001",markdown:"mkd001",todolist:"todo001"},s=_.value.toLowerCase(),o=k.value;if(!(s in i)){v.value=l("login.invalidUser")||"Usuario no válido",m.value=l("login.error")||"Usuario o contraseña incorrectos",p.value=!1;return}if(o!==i[s]){g.value=l("login.invalidPassword")||"Contraseña no válida",m.value=l("login.error")||"Usuario o contraseña incorrectos",p.value=!1;return}p.value=!1;const N=s==="dashboard"?"https://kvothe73.github.io/dashboard-startup":s==="markdown"?"https://kvothe73.github.io/live-markdown-editor":"https://kvothe73.github.io/todo-list";window.open(N,"_blank"),_.value="",k.value="",E.value=!1},q=()=>{w.value="",r.value="",C.value=!0},D=()=>{if(!w.value){r.value=l("login.resetError")||"Introduce un correo válido";return}if(!$.test(w.value)){r.value=l("login.resetError")||"Email inválido";return}r.value=l("login.resetSuccess")||"Enlace de recuperación enviado",setTimeout(()=>{r.value="",C.value=!1,w.value=""},1500)},P=()=>{r.value&&(r.value="")};return H(()=>{n.applyTheme();const i=localStorage.getItem("lang");i&&(i==="es"||i==="en")&&(c.value=i)}),(i,s)=>(f(),b("div",W,[e("div",X,[e("div",Y,[e("button",{onClick:s[0]||(s[0]=o=>T("es")),"aria-label":t(l)("lang.es"),"aria-pressed":I.value,title:t(l)("lang.es"),class:y({active:I.value})},[e("img",{src:t(A),alt:"Español",class:"flag"},null,8,ee)],10,Z),e("button",{onClick:s[1]||(s[1]=o=>T("en")),"aria-label":t(l)("lang.en"),"aria-pressed":R.value,title:t(l)("lang.en"),class:y({active:R.value})},[e("img",{src:t(G),alt:"English",class:"flag"},null,8,le)],10,se),e("button",{type:"button",class:"theme-toggle-btn","aria-label":t(n).theme==="dark"?"Light mode":"Dark mode",title:t(n).theme==="dark"?"Modo claro":"Modo oscuro",onClick:s[2]||(s[2]=(...o)=>t(n).toggleTheme&&t(n).toggleTheme(...o))},a(t(n).theme==="light"?"🌙":"☀️"),9,te)]),e("div",oe,[e("div",ae,[s[11]||(s[11]=e("span",{class:"logo"},null,-1)),e("div",null,[s[10]||(s[10]=e("strong",null,"NR2025",-1)),e("small",null,a(t(l)("login.subtitle")),1)])]),s[12]||(s[12]=e("div",{class:"icon"},[e("i",{class:"fa fa-lock"})],-1))]),e("div",ne,[e("form",{onSubmit:U(V,["prevent"])},[M(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>_.value=o),type:"text",class:y(["form-control",{"is-invalid":v.value}]),placeholder:t(l)("login.user"),"aria-required":"true",onInput:s[4]||(s[4]=o=>{v.value=null,m.value=null})},null,42,re),[[L,_.value]]),v.value?(f(),b("div",ie,a(v.value),1)):x("",!0),M(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>k.value=o),type:"password",class:y(["form-control",{"is-invalid":g.value}]),placeholder:t(l)("login.password"),"aria-required":"true",onInput:s[6]||(s[6]=o=>{g.value=null,m.value=null})},null,42,ue),[[L,k.value]]),g.value?(f(),b("div",de,a(g.value),1)):x("",!0),e("div",ce,[M(e("input",{id:"rememberMe","onUpdate:modelValue":s[7]||(s[7]=o=>E.value=o),type:"checkbox",class:"form-check-input"},null,512),[[J,E.value]]),e("label",ve,a(t(l)("login.remember")),1)]),e("button",{type:"submit",class:"btn btn-theme w-100",disabled:p.value},[p.value?(f(),b("span",me)):x("",!0),O(" "+a(t(l)("login.signIn")),1)],8,ge)],32),e("small",pe,[e("a",{href:"#",onClick:U(q,["prevent"])},a(t(l)("login.forgotPassword")),1)]),m.value?(f(),b("div",be,a(m.value),1)):x("",!0)])]),C.value?(f(),b("div",fe,[e("div",he,[e("h5",_e,a(t(l)("login.resetTitle")),1),M(e("input",{"onUpdate:modelValue":s[8]||(s[8]=o=>w.value=o),type:"email",class:y(["form-control mb-2",{"is-invalid":r.value&&r.value!==t(l)("login.resetSuccess")}]),placeholder:t(l)("login.resetPlaceholder"),"aria-required":"true",onInput:P},null,42,ke),[[L,w.value]]),e("small",we,a(t(l)("login.resetHelper")),1),e("div",xe,[e("button",{class:"btn btn-secondary",onClick:s[9]||(s[9]=o=>C.value=!1)},a(t(l)("login.cancel")),1),e("button",{class:"btn btn-theme",onClick:D},a(t(l)("login.sendReset")),1)]),r.value?(f(),b("div",{key:0,class:y(["mt-2","text-center",r.value===t(l)("login.resetSuccess")?"text-success":"text-danger"])},a(r.value),3)):x("",!0)])])):x("",!0)]))}}),Ee=(h,u)=>{const n=h.__vccOpts||h;for(const[l,c]of u)n[l]=c;return n},Me=Ee(ye,[["__scopeId","data-v-a32247fe"]]);export{Me as default};
